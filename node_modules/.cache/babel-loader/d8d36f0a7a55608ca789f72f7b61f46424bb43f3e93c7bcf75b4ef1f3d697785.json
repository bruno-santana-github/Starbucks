{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Starbucks-main\\\\src\\\\contexts\\\\CartContext.tsx\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport { produce } from \"immer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext({});\nconst COFFEE_ITEMS_STORAGE_KEY = \"coffeeDelivery:cartItems\";\nexport function CartContextProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cartItems, setCartItems] = useState(() => {\n    const storedCartItems = localStorage.getItem(COFFEE_ITEMS_STORAGE_KEY);\n    if (storedCartItems) {\n      return JSON.parse(storedCartItems);\n    }\n    return [];\n  });\n  const cartQuantity = cartItems.length;\n  const cartItemsTotal = cartItems.reduce((total, cartItem) => {\n    return total + cartItem.price * cartItem.quantity;\n  }, 0);\n  function addCoffeeToCart(coffee) {\n    const coffeeAlreadyExistsInCart = cartItems.findIndex(cartItem => cartItem.id === coffee.id);\n    const newCart = produce(cartItems, draft => {\n      if (coffeeAlreadyExistsInCart < 0) {\n        draft.push(coffee);\n      } else {\n        draft[coffeeAlreadyExistsInCart].quantity += coffee.quantity;\n      }\n    });\n    setCartItems(newCart);\n  }\n  function changeCartItemQuantity(cartItemId, type) {\n    const newCart = produce(cartItems, draft => {\n      const coffeeExistsInCart = cartItems.findIndex(cartItem => cartItem.id === cartItemId);\n      if (coffeeExistsInCart >= 0) {\n        const item = draft[coffeeExistsInCart];\n        draft[coffeeExistsInCart].quantity = type === \"increase\" ? item.quantity + 1 : item.quantity - 1;\n      }\n    });\n    setCartItems(newCart);\n  }\n  function removeCartItem(cartItemId) {\n    const newCart = produce(cartItems, draft => {\n      const coffeeExistsInCart = cartItems.findIndex(cartItem => cartItem.id === cartItemId);\n      if (coffeeExistsInCart >= 0) {\n        draft.splice(coffeeExistsInCart, 1);\n      }\n    });\n    setCartItems(newCart);\n  }\n  function cleanCart() {\n    setCartItems([]);\n  }\n  useEffect(() => {\n    localStorage.setItem(COFFEE_ITEMS_STORAGE_KEY, JSON.stringify(cartItems));\n  }, [cartItems]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addCoffeeToCart,\n      cartQuantity,\n      changeCartItemQuantity,\n      removeCartItem,\n      cartItemsTotal,\n      cleanCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(CartContextProvider, \"sKcyl6k6YVQ4c6rCzfj7lV+g3K8=\");\n_c = CartContextProvider;\nvar _c;\n$RefreshReg$(_c, \"CartContextProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","produce","CartContext","COFFEE_ITEMS_STORAGE_KEY","CartContextProvider","children","cartItems","setCartItems","storedCartItems","localStorage","getItem","JSON","parse","cartQuantity","length","cartItemsTotal","reduce","total","cartItem","price","quantity","addCoffeeToCart","coffee","coffeeAlreadyExistsInCart","findIndex","id","newCart","draft","push","changeCartItemQuantity","cartItemId","type","coffeeExistsInCart","item","removeCartItem","splice","cleanCart","setItem","stringify"],"sources":["C:/xampp/htdocs/Starbucks-main/src/contexts/CartContext.tsx"],"sourcesContent":["import { createContext, ReactNode, useEffect, useState } from \"react\";\nimport { Coffee } from \"../components/componentsHome/CoffeeCard\";\nimport { produce } from \"immer\";\n\nexport interface CartItem extends Coffee {\n  quantity: number;\n}\n\ninterface CartContextType {\n  cartItems: CartItem[];\n  cartQuantity: number;\n  cartItemsTotal: number;\n  addCoffeeToCart: (coffee: CartItem) => void;\n  changeCartItemQuantity: (\n    cartItemId: number,\n    type: \"increase\" | \"decrease\"\n  ) => void;\n  removeCartItem: (cartItemId: number) => void;\n  cleanCart: () => void;\n}\n\nexport const CartContext = createContext({} as CartContextType);\n\ninterface CartContextProviderProps {\n  children: ReactNode;\n}\n\nconst COFFEE_ITEMS_STORAGE_KEY = \"coffeeDelivery:cartItems\";\n\nexport function CartContextProvider({ children }: CartContextProviderProps) {\n  const [cartItems, setCartItems] = useState<CartItem[]>(() => {\n    const storedCartItems = localStorage.getItem(COFFEE_ITEMS_STORAGE_KEY);\n    if (storedCartItems) {\n      return JSON.parse(storedCartItems);\n    }\n    return [];\n  });\n\n  const cartQuantity = cartItems.length;\n\n  const cartItemsTotal = cartItems.reduce((total, cartItem) => {\n    return total + cartItem.price * cartItem.quantity;\n  }, 0);\n\n  function addCoffeeToCart(coffee: CartItem) {\n    const coffeeAlreadyExistsInCart = cartItems.findIndex(\n      (cartItem) => cartItem.id === coffee.id\n    );\n\n    const newCart = produce(cartItems, (draft) => {\n      if (coffeeAlreadyExistsInCart < 0) {\n        draft.push(coffee);\n      } else {\n        draft[coffeeAlreadyExistsInCart].quantity += coffee.quantity;\n      }\n    });\n\n    setCartItems(newCart);\n  }\n\n  function changeCartItemQuantity(\n    cartItemId: number,\n    type: \"increase\" | \"decrease\"\n  ) {\n    const newCart = produce(cartItems, (draft) => {\n      const coffeeExistsInCart = cartItems.findIndex(\n        (cartItem) => cartItem.id === cartItemId\n      );\n\n      if (coffeeExistsInCart >= 0) {\n        const item = draft[coffeeExistsInCart];\n        draft[coffeeExistsInCart].quantity =\n          type === \"increase\" ? item.quantity + 1 : item.quantity - 1;\n      }\n    });\n\n    setCartItems(newCart);\n  }\n\n  function removeCartItem(cartItemId: number) {\n    const newCart = produce(cartItems, (draft) => {\n      const coffeeExistsInCart = cartItems.findIndex(\n        (cartItem) => cartItem.id === cartItemId\n      );\n\n      if (coffeeExistsInCart >= 0) {\n        draft.splice(coffeeExistsInCart, 1);\n      }\n    });\n\n    setCartItems(newCart);\n  }\n\n  function cleanCart() {\n    setCartItems([]);\n  }\n\n  useEffect(() => {\n    localStorage.setItem(COFFEE_ITEMS_STORAGE_KEY, JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  return (\n    <CartContext.Provider\n      value={{\n        cartItems,\n        addCoffeeToCart,\n        cartQuantity,\n        changeCartItemQuantity,\n        removeCartItem,\n        cartItemsTotal,\n        cleanCart,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}